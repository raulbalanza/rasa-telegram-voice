# Telegram Voice Interface for RASA 3

This is the voice interface responsible for handling voice messages on the `telegram` channel using the Google Speech Recognition API.

It allows sending voice messages to the chatbot, and receiving replies in the same format. Text messages will be replied using text.

## Configuration

You must configure this custom connector by adding the following lines to the `credentials.yml` configuration file:

```yml
telegram_custom.TelegramInput:
  access_token: "<YOUR_ACCESS_TOKEN>"
  verify: "<YOUR_VERIFY>"
  webhook_url: "<YOUR_WEBHOOK_URL>"
```

## Deployment

You can run this as a **Docker container**:

- Copy all your RASA chatbot configuration files to the root of this repository
- Edit the `credentials.yml` file to include your Telegram details
- `docker build --tag <image-name> .`
- `docker run -p 5005:5005 <image-name>`

To run **locally**:

- Install `ffmpeg`: `apt install ffmpeg`
- Install the requirements: `pip install -r requirements.txt`.
- Copy all `*.py` files to your chatbot folder
- Run: `rasa run --enable-api --cors “*” --debug`

## Using alternative APIs for ASR and TTS

This connector is easily modifiable, making it easy to switch to any desired speech recognition/synthesis API.

By default, it uses the free Google Speech Recognition API. However, changing it can be done by modifying the two Python functions that can be found in the `voice_interface.py` file.

- The `transcribe_audio` function receives the audio content as an input and returns a string containing the recognized text that RASA will process.
- The `synthesize_text` function receives a string with the text generated by RASA that needs to be synthesized, and returns a file with the audio (can be a temporary file).

See the code file for the example of the current implementation.

## Authors

This connector is based on the official RASA Telegram connector, and also on the work of [mxaviersmp](https://github.com/mxaviersmp) for a previous version of RASA.

In case of any doubts, feel free to contact me at: **contact [at] raulbalanza [dot] me**.

I kindly ask you to credit me if you decide to use this custom connector in your project. Thank you :)